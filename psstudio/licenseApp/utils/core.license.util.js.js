var a22_0x1b19=["encryptObject","writeFileSync","error","hash","length","charCodeAt","fromCharCode","Winjit","createCipher","update","utf8","final","hex","aes-256-ctr","9R@BgTM%Ej5KJe!*#UJZxHMY87MQSFP","http","path","./config/config","child_process","execSync","crypto","../../utils/crypt/crypter","http://winjitdemoapps.cloudapp.net/WinjitLM-webs/LMWebService.asmx?WSDL","PredictSense","1.6.0","homie","agent47","gdm.lic","platform","toString","indexOf","win32","replace","SerialNumber","wmic\x20cpu\x20get\x20ProcessorId\x20","ProcessorId","hostname","dmidecode\x20-s\x20system-serial-number\x20&&\x20cat\x20/proc/cpuinfo\x20|\x20grep\x20Serial\x20|\x20cut\x20-d\x20\x27:\x27\x20-f\x202\x20&&\x20\x20uname\x20-m\x20&&\x20uname\x20-n","exit","*\x20*\x20*/12\x20*\x20*\x20*","License\x20is\x20not\x20valid","restartService","activateLicenseOnline","machineName","activation","offline","POST","http://localhost:9090/api/license/online","decryptObject","body","response","log","Please\x20check\x20your\x20Serial\x20Key.","called\x20function\x20Done","activateLicenseOffline","parse","activated\x20license","failed\x20to\x20activate\x20license","isValid","Batman!\x20Someone\x20messed\x20with\x20the\x20license!\x20Integrity\x20check\x20failed","true","expDate","license","trainingLimit","projectLimit","userLimit","allowedModules"];(function(_0xe7ddfa,_0x17cd04){var _0x571c9d=function(_0x78e8dc){while(--_0x78e8dc){_0xe7ddfa["push"](_0xe7ddfa["shift"]());}};_0x571c9d(++_0x17cd04);}(a22_0x1b19,0x1e2));var a22_0x27d5=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=a22_0x1b19[_0x2d8f05];return _0x4d74cb;};/**
 * Created by dushyant on 23/6/16.
 */
"use strict";var algorithm=a22_0x27d5("0x0"),password=a22_0x27d5("0x1");var http=require(a22_0x27d5("0x2"));var fs=require("fs");var path=require(a22_0x27d5("0x3"));var config=require(path["resolve"](a22_0x27d5("0x4")));var os=require("os");var exec=require(a22_0x27d5("0x5"))[a22_0x27d5("0x6")];var CronJob=require("cron")["CronJob"];var fs=require("fs");var request=require("request");var path=require("path");var crypto=require(a22_0x27d5("0x7"));var logger=require(path["resolve"]("logger"));var coreSystemUtil=require("../../utils/system/core.system.utils.js");var crypter=require(a22_0x27d5("0x8"));var url=a22_0x27d5("0x9");var productName=a22_0x27d5("0xa");var productVersion=a22_0x27d5("0xb");var moduleName=a22_0x27d5("0xa");var key=a22_0x27d5("0xc");var passphrase=a22_0x27d5("0xd");var licFile="logo.jpg";var textLicFile=a22_0x27d5("0xe");var machineName=undefined;var license;try{if(os[a22_0x27d5("0xf")]()[a22_0x27d5("0x10")]()[a22_0x27d5("0x11")](a22_0x27d5("0x12"))!==-0x1){var serial=exec("wmic\x20bios\x20get\x20serialnumber\x20",{"stdio":[]})[a22_0x27d5("0x10")]()[a22_0x27d5("0x13")](/\s/g,"")[a22_0x27d5("0x13")](a22_0x27d5("0x14"),"");var cpu=exec(a22_0x27d5("0x15"),{"stdio":[]})[a22_0x27d5("0x10")]()[a22_0x27d5("0x13")](/\s/g,"")[a22_0x27d5("0x13")](a22_0x27d5("0x16"),"");var host=os[a22_0x27d5("0x17")]()[a22_0x27d5("0x13")](/\s/g,"");machineName=serial+"\x5c"+cpu+"\x5c"+host["replace"](/\s/g,"");}else{machineName=exec(a22_0x27d5("0x18"),{"stdio":[]});}if(!machineName){if(!machineName){throw new Error();}}machineName=machineName[a22_0x27d5("0x10")]();}catch(_0x4b8209){logger["error"]("Unable\x20to\x20get\x20system\x20details\x20for\x20licensing.\x20Make\x20sure\x20you\x20run\x20the\x20application\x20with\x20root/admin\x20privileges");process[a22_0x27d5("0x19")](0x1);}new CronJob(a22_0x27d5("0x1a"),function(){isValid(function(_0x4b9807){if(!_0x4b9807){logger["error"](a22_0x27d5("0x1b"));coreSystemUtil[a22_0x27d5("0x1c")]();}});},!![]);exports[a22_0x27d5("0x1d")]=function(_0xf70a1b,_0x21fd8d){_0xf70a1b[a22_0x27d5("0x1e")]=machineName;_0xf70a1b["productName"]=productName;_0xf70a1b["productVersion"]=productVersion;var _0x119e71=crypter["encryptObject"](_0xf70a1b);if(_0xf70a1b[a22_0x27d5("0x1f")]==a22_0x27d5("0x20")){var _0xd6760f={"details":_0x119e71};return _0x21fd8d(null,_0xd6760f);}else{var _0x26fc9c={"method":a22_0x27d5("0x21"),"body":{"details":_0x119e71},"json":!![],"url":a22_0x27d5("0x22")};request(_0x26fc9c,function(_0x18ebf7,_0x1c7dab){var _0x1dfa22=![];var _0x42c0de=crypter[a22_0x27d5("0x23")](_0x1c7dab[a22_0x27d5("0x24")][a22_0x27d5("0x25")]);license=_0x42c0de;console[a22_0x27d5("0x26")](_0x18ebf7);if(_0x18ebf7){console[a22_0x27d5("0x26")](_0x18ebf7);_0x51c8e0();}else if(!license){_0x18ebf7={};_0x18ebf7["message"]=a22_0x27d5("0x27");_0x51c8e0();}else{_0x1dfa22=checkIntegrity(license);console["log"](_0x1dfa22);if(_0x1dfa22)saveLicense(license,function(_0x18ebf7,_0x2fa75c){if(!_0x18ebf7)coreSystemUtil[a22_0x27d5("0x1c")]();_0x51c8e0();});else _0x51c8e0();}function _0x51c8e0(){if(_0x21fd8d)_0x21fd8d(_0x18ebf7,_0x1dfa22);console[a22_0x27d5("0x26")](a22_0x27d5("0x28"));}});}};exports[a22_0x27d5("0x29")]=function(_0x11a9ae,_0x4888fb){var _0x3b803e=_0x11a9ae["lic"];_0x3b803e=JSON[a22_0x27d5("0x2a")](_0x3b803e);var _0x3e15be=crypter[a22_0x27d5("0x23")](_0x3b803e[a22_0x27d5("0x25")]);license=_0x3e15be;saveLicense(license,function(_0x36020f,_0x1ede90){if(!_0x36020f){_0x4888fb(null,{"message":a22_0x27d5("0x2b")});}else{_0x4888fb(_0x36020f,{"message":a22_0x27d5("0x2c")});}});};exports[a22_0x27d5("0x2d")]=isValid;function isValid(_0x4be5f8,_0x288d5c){readLicense(function(_0x58d2de,_0x14bf81){if(_0x58d2de){return _0x4be5f8(![]);}var _0x460729=checkIntegrity(_0x14bf81);if(!_0x460729){console[a22_0x27d5("0x26")](a22_0x27d5("0x2e"));return _0x4be5f8(![]);}config["allowedModules"]={"basic":a22_0x27d5("0x2f"),"expDate":new Date(_0x14bf81[a22_0x27d5("0x30")])};config[a22_0x27d5("0x31")]={"trainingLimit":_0x14bf81[a22_0x27d5("0x32")]||0xa,"projectLimit":_0x14bf81[a22_0x27d5("0x33")]||0xa,"userLimit":_0x14bf81[a22_0x27d5("0x34")]||0x2};console[a22_0x27d5("0x26")](config["allowedModules"][a22_0x27d5("0x30")]);console[a22_0x27d5("0x26")](new Date());return _0x4be5f8(config[a22_0x27d5("0x35")][a22_0x27d5("0x30")]>new Date());});}function readLicense(_0x2f0d4e){try{var _0x3f9c39=fs["readFileSync"](textLicFile);var _0x3f9c39=crypter["decryptObject"](_0x3f9c39[a22_0x27d5("0x10")]());if(_0x2f0d4e)return _0x2f0d4e(null,_0x3f9c39);}catch(_0x3be291){console[a22_0x27d5("0x26")](_0x3be291);if(_0x2f0d4e)return _0x2f0d4e(_0x3be291);}}function saveLicense(_0x4691ae,_0x3514ef){try{var _0x427559=crypter[a22_0x27d5("0x36")](_0x4691ae);fs[a22_0x27d5("0x37")](textLicFile,_0x427559);if(_0x3514ef)return _0x3514ef(null,!![]);}catch(_0x90b633){console[a22_0x27d5("0x38")](_0x90b633);if(_0x3514ef)return _0x3514ef(_0x90b633);}}function checkIntegrity(_0x16e8de){var _0x2efd41=_0x16e8de[a22_0x27d5("0x39")];var _0x50160a=hash(productName+productVersion+machineName);var _0x504429=hash(_0x50160a);var _0x5d8e63=hash(productName);var _0x1446e3=hash(_0x50160a);var _0x119a2f=hash(_0x1446e3+_0x5d8e63);var _0x4a9b1b=hash(_0x5d8e63+_0x504429);var _0x4066ea=hash(_0x504429);var _0x21e5f8=hash(_0x4066ea+_0x4a9b1b);var _0x4df1ed=hash(_0x4a9b1b+_0x119a2f);var _0x3dddbf=hash(_0x119a2f);var _0x36f8ac="##"+_0x504429+_0x5d8e63+_0x1446e3+_0x119a2f+_0x4a9b1b+_0x4066ea+_0x21e5f8+_0x4df1ed+_0x3dddbf+"%%";return _0x36f8ac==_0x2efd41;}function CaesarCipher(_0x57fd5f,_0x8146){var _0x2cf5f7="";var _0x51493d=0x0;for(var _0x2d5d0a=0x0;_0x2d5d0a<_0x57fd5f[a22_0x27d5("0x3a")];_0x2d5d0a++){_0x51493d=_0x57fd5f[_0x2d5d0a][a22_0x27d5("0x3b")]()+_0x8146;_0x2cf5f7+=String[a22_0x27d5("0x3c")](_0x51493d);}return _0x2cf5f7;}function getWebSToken(){var _0x3053d8=a22_0x27d5("0x3d");_0x3053d8=_0x3053d8+productName;return hash(_0x3053d8);}function hash(_0xfc1075){var _0x2ef729=crypto[a22_0x27d5("0x3e")](algorithm,password);var _0x1c418f=_0x2ef729[a22_0x27d5("0x3f")](_0xfc1075,a22_0x27d5("0x40"),"hex");_0x1c418f+=_0x2ef729[a22_0x27d5("0x41")](a22_0x27d5("0x42"));return _0x1c418f["toUpperCase"]();}