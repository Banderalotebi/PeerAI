var a20_0x25c8=["createTransport","server","tls","secure","email","Test\x20Mail\x20from\x20IoTSense","Test\x20Mail","sendMail","An\x20test\x20email\x20has\x20been\x20sent\x20to\x20","testEmail","Email\x20settings\x20provided\x20by\x20you\x20are\x20incorrect","loadConfigs","length","path","./logger","mongoose","model","Config","./config/config","createIfNoConfigExist","exec","error","Unable\x20to\x20get\x20default\x20Config","smtpConfig","winjitiot@gmail.com","winjit@123","kerberos","other","zigbeeConfig","Digi_XStick","smsConfig","admin","password","+17077376293","remoteConfig","mqtt://www.winjit.com","compressionConfig","purgeConfig","menuConfig","info","save","Unable\x20to\x20save\x20Default\x20Config","Default\x20Config\x20Created","readSMTP","find","Error\x20while\x20reading\x20config","status","send","getErrorMessage","json","log","updateSMTP","body","Error\x20while\x20updating\x20SMTP\x20config","Updated\x20SMTP\x20Config","readZigbee","updateZigbee","Error\x20while\x20updating\x20Zigbee\x20config","Updated\x20Zigbee\x20Config","readCompression","updateCompression","Error\x20while\x20reading\x20\x20config","Error\x20while\x20updating\x20Compression\x20config","readSms","Updated\x20SMS\x20Config","updateRemote","Updated\x20REMOTE\x20Config","../../../../utils/remote-config/core.remote-config.utils","Error\x20while\x20reading\x20Purge\x20config","Error\x20while\x20updating\x20Purge\x20config","Updated\x20Purge\x20Config","Error\x20while\x20reading\x20Device-Id\x20config","updateDeviceIdConfig","deviceIdConfig","Error\x20while\x20updating\x20DeviceId\x20config","Updated\x20DeviceId\x20Config","readMenuConfig","Error\x20while\x20reading\x20Menu\x20config","Error\x20while\x20updating\x20menu\x20config","Updated\x20Menu\x20Config"];(function(_0x17e953,_0x385f25){var _0x467cfc=function(_0x222d47){while(--_0x222d47){_0x17e953["push"](_0x17e953["shift"]());}};_0x467cfc(++_0x385f25);}(a20_0x25c8,0x19d));var a20_0x5502=function(_0x298a7d,_0x4eaba6){_0x298a7d=_0x298a7d-0x0;var _0x32b10c=a20_0x25c8[_0x298a7d];return _0x32b10c;};/**
 * Created by saket on 6/10/16.
 */
"use strict";/**
 * Module dependencies.
 */var path=require(a20_0x5502("0x0")),logger=require(path["resolve"](a20_0x5502("0x1"))),mongoose=require(a20_0x5502("0x2")),Config=mongoose[a20_0x5502("0x3")](a20_0x5502("0x4")),nodemailer=require("nodemailer"),errorHandler=require("../../../core/server/controllers/errors.server.controller");var configVars=require(path["resolve"](a20_0x5502("0x5")));exports[a20_0x5502("0x6")]=function(){Config["findOne"]()[a20_0x5502("0x7")](function(_0x107753,_0x5547f0){if(_0x107753){logger[a20_0x5502("0x8")](a20_0x5502("0x9"));}var _0x549e04=![];if(!_0x5547f0){_0x5547f0=new Config();}if(!_0x5547f0[a20_0x5502("0xa")]){_0x5547f0["smtpConfig"]={"email":a20_0x5502("0xb"),"password":a20_0x5502("0xc"),"server":"smtp.gmail.com","port":"465","secure":!![],"security":"SSL/TLS","authenticationMethod":a20_0x5502("0xd"),"service":a20_0x5502("0xe")};_0x549e04=!![];}if(!_0x5547f0[a20_0x5502("0xf")]){_0x5547f0[a20_0x5502("0xf")]={"deviceName":a20_0x5502("0x10")};_0x549e04=!![];}if(!_0x5547f0[a20_0x5502("0x11")]){_0x5547f0["smsConfig"]={"accountId":a20_0x5502("0x12"),"authToken":a20_0x5502("0x13"),"mobileNum":a20_0x5502("0x14")};_0x549e04=!![];}if(!_0x5547f0["remoteConfig"]){_0x5547f0[a20_0x5502("0x15")]={"isOn":![],"endpoint":a20_0x5502("0x16"),"username":"admin","password":a20_0x5502("0x13")};_0x549e04=!![];}if(!_0x5547f0[a20_0x5502("0x17")]){_0x5547f0[a20_0x5502("0x17")]={"decompressorUrl":"http://example.com"};_0x549e04=!![];}if(!_0x5547f0[a20_0x5502("0x18")]){_0x5547f0[a20_0x5502("0x18")]={"isDataPurge":![],"expDay":0x5a};_0x549e04=!![];}if(!_0x5547f0["deviceIdConfig"]){_0x5547f0["deviceIdConfig"]={"isAutoCreateDeviceId":!![]};_0x549e04=!![];}if(!_0x5547f0[a20_0x5502("0x19")]){_0x5547f0[a20_0x5502("0x19")]={"isDashboard":!![],"isSync":!![],"isDevice":!![],"isData":!![],"isSNMP":!![],"isModbus":!![],"isOPC":!![],"isUDD":!![],"isAnalytics":!![],"isComputing":!![],"isUsers":!![],"isSettings":!![],"isHelp":!![]};_0x549e04=!![];}if(_0x549e04){logger[a20_0x5502("0x1a")]("Creating\x20\x20Default\x20Config");_0x5547f0[a20_0x5502("0x1b")](function(_0x107753){if(_0x107753){logger["error"](a20_0x5502("0x1c"),{"error":_0x107753});}else{logger["info"](a20_0x5502("0x1d"));}});}});};exports[a20_0x5502("0x1e")]=function(_0x105f41,_0x42f82b){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0xcc61d,_0xa32fdc){if(_0xcc61d){logger[a20_0x5502("0x8")](a20_0x5502("0x20"),{"error":_0xcc61d});return _0x42f82b[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0xcc61d)});}else{_0x42f82b[a20_0x5502("0x24")](_0xa32fdc[0x0][a20_0x5502("0xa")]);console[a20_0x5502("0x25")](_0xa32fdc[0x0][a20_0x5502("0xa")]);}});};exports[a20_0x5502("0x26")]=function(_0x373fd6,_0x15506a){console[a20_0x5502("0x25")](_0x373fd6["body"]);Config[a20_0x5502("0x1f")]()["exec"](function(_0x500d8d,_0xcee7da){if(_0x500d8d){logger[a20_0x5502("0x8")](a20_0x5502("0x20"),{"error":_0x500d8d});return _0x15506a[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler["getErrorMessage"](_0x500d8d)});}else{_0xcee7da[0x0][a20_0x5502("0xa")]=_0x373fd6[a20_0x5502("0x27")];_0xcee7da[0x0]["save"](function(_0x500d8d){if(_0x500d8d){logger[a20_0x5502("0x8")](a20_0x5502("0x28"),{"error":_0x500d8d});return _0x15506a[a20_0x5502("0x21")](0x190)["send"]({"message":errorHandler[a20_0x5502("0x23")](_0x500d8d)});}else{_0x15506a["json"](_0xcee7da[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x29"));console[a20_0x5502("0x25")](_0xcee7da[0x0][a20_0x5502("0xa")]);}});}});};exports[a20_0x5502("0x2a")]=function(_0x42f088,_0x98ae6b){Config[a20_0x5502("0x1f")]()["exec"](function(_0x106616,_0x202369){if(_0x106616){logger[a20_0x5502("0x8")](a20_0x5502("0x20"),{"error":_0x106616});return _0x98ae6b[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x106616)});}else{_0x98ae6b[a20_0x5502("0x24")](_0x202369[0x0][a20_0x5502("0xf")]);}});};exports[a20_0x5502("0x2b")]=function(_0xe5d73b,_0x3ca580){console[a20_0x5502("0x25")](_0xe5d73b[a20_0x5502("0x27")]);Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x39608a,_0x46fa24){if(_0x39608a){logger[a20_0x5502("0x8")]("Error\x20while\x20reading\x20config",{"error":_0x39608a});return _0x3ca580[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x39608a)});}else{_0x46fa24[0x0][a20_0x5502("0xf")]=_0xe5d73b["body"];_0x46fa24[0x0][a20_0x5502("0x1b")](function(_0x39608a){if(_0x39608a){logger[a20_0x5502("0x8")](a20_0x5502("0x2c"),{"error":_0x39608a});return _0x3ca580[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x39608a)});}else{_0x3ca580[a20_0x5502("0x24")](_0x46fa24[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x2d"));console["log"](_0x46fa24[0x0][a20_0x5502("0xf")]);}});}});};exports[a20_0x5502("0x2e")]=function(_0x120367,_0x321a7f){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x596250,_0x5bed91){if(_0x596250){logger[a20_0x5502("0x8")](a20_0x5502("0x20"),{"error":_0x596250});return _0x321a7f[a20_0x5502("0x21")](0x190)["send"]({"message":errorHandler["getErrorMessage"](_0x596250)});}else{_0x321a7f[a20_0x5502("0x24")](_0x5bed91[0x0][a20_0x5502("0x17")]);}});};exports[a20_0x5502("0x2f")]=function(_0x4fe1d9,_0x1ebbd5){console[a20_0x5502("0x25")](_0x4fe1d9[a20_0x5502("0x27")]);Config["find"]()[a20_0x5502("0x7")](function(_0x3f7aba,_0x109ec7){if(_0x3f7aba){logger["error"](a20_0x5502("0x30"),{"error":_0x3f7aba});return _0x1ebbd5[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x3f7aba)});}else{_0x109ec7[0x0][a20_0x5502("0x17")]=_0x4fe1d9[a20_0x5502("0x27")];_0x109ec7[0x0][a20_0x5502("0x1b")](function(_0x3f7aba){if(_0x3f7aba){logger["error"](a20_0x5502("0x31"),{"error":_0x3f7aba});return _0x1ebbd5[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x3f7aba)});}else{_0x1ebbd5["json"](_0x109ec7[0x0]);logger[a20_0x5502("0x1a")]("Updated\x20Compression\x20Config");console[a20_0x5502("0x25")](_0x109ec7[0x0][a20_0x5502("0x17")]);}});}});};exports[a20_0x5502("0x32")]=function(_0x5e969a,_0xad6453){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x17bfbb,_0x5c0646){if(_0x17bfbb){logger[a20_0x5502("0x8")](a20_0x5502("0x20"),{"error":_0x17bfbb});return _0xad6453[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x17bfbb)});}else{_0xad6453[a20_0x5502("0x24")](_0x5c0646[0x0][a20_0x5502("0x11")]);}});};exports["updateSms"]=function(_0x4bc18b,_0x1d6eb9){console[a20_0x5502("0x25")](_0x4bc18b[a20_0x5502("0x27")]);Config["find"]()[a20_0x5502("0x7")](function(_0x5c4491,_0x1518bb){if(_0x5c4491){logger["error"](a20_0x5502("0x20"),{"error":_0x5c4491});return _0x1d6eb9[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x5c4491)});}else{_0x1518bb[0x0][a20_0x5502("0x11")]=_0x4bc18b[a20_0x5502("0x27")];_0x1518bb[0x0][a20_0x5502("0x1b")](function(_0x5c4491){if(_0x5c4491){logger["error"]("Error\x20while\x20updating\x20SMS\x20config",{"error":_0x5c4491});return _0x1d6eb9[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler["getErrorMessage"](_0x5c4491)});}else{_0x1d6eb9[a20_0x5502("0x24")](_0x1518bb[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x33"));}});}});};exports["readRemote"]=function(_0x10cbd7,_0x39bee1){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0xe0cb43,_0x3342b7){if(_0xe0cb43){logger["error"](a20_0x5502("0x20"),{"error":_0xe0cb43});return _0x39bee1[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0xe0cb43)});}else{_0x39bee1[a20_0x5502("0x24")](_0x3342b7[0x0][a20_0x5502("0x15")]);console[a20_0x5502("0x25")](_0x3342b7[0x0][a20_0x5502("0x15")]);}});};exports[a20_0x5502("0x34")]=function(_0x3c676e,_0x5ccfdd){console["log"](_0x3c676e[a20_0x5502("0x27")]);Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0xe49750,_0x4bbe8a){if(_0xe49750){logger[a20_0x5502("0x8")](a20_0x5502("0x30"),{"error":_0xe49750});return _0x5ccfdd["status"](0x190)["send"]({"message":errorHandler[a20_0x5502("0x23")](_0xe49750)});}else{_0x4bbe8a[0x0]["remoteConfig"]=_0x3c676e[a20_0x5502("0x27")];_0x4bbe8a[0x0]["save"](function(_0xe49750){if(_0xe49750){logger[a20_0x5502("0x8")]("Error\x20while\x20updating\x20REMOTE\x20config",{"error":_0xe49750});return _0x5ccfdd[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler["getErrorMessage"](_0xe49750)});}else{_0x5ccfdd["json"](_0x4bbe8a[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x35"));console["log"](_0x4bbe8a[0x0]["remoteConfig"]);require(a20_0x5502("0x36"))["init"]();}});}});};exports["readPurgeConfig"]=function(_0x331300,_0x3b0830){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x386bc8,_0x109891){if(_0x386bc8){logger["error"](a20_0x5502("0x37"),{"error":_0x386bc8});return _0x3b0830[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x386bc8)});}else{_0x3b0830[a20_0x5502("0x24")](_0x109891[0x0][a20_0x5502("0x18")]);}});};exports["updatePurgeConfig"]=function(_0x5bffe7,_0x292321){Config[a20_0x5502("0x1f")]()["exec"](function(_0x2a92a2,_0x2cc2e9){if(_0x2a92a2){logger[a20_0x5502("0x8")](a20_0x5502("0x37"),{"error":_0x2a92a2});return _0x292321[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x2a92a2)});}else{_0x2cc2e9[0x0][a20_0x5502("0x18")]=_0x5bffe7[a20_0x5502("0x27")];_0x2cc2e9[0x0][a20_0x5502("0x1b")](function(_0x2a92a2){if(_0x2a92a2){logger[a20_0x5502("0x8")](a20_0x5502("0x38"),{"error":_0x2a92a2});return _0x292321[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x2a92a2)});}else{_0x292321[a20_0x5502("0x24")](_0x2cc2e9[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x39"));}});}});};exports["readDeviceIdConfig"]=function(_0x40ac9e,_0x4bf271){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x4061fe,_0x3a95d0){if(_0x4061fe){logger[a20_0x5502("0x8")](a20_0x5502("0x3a"),{"error":_0x4061fe});return _0x4bf271[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x4061fe)});}else{_0x4bf271[a20_0x5502("0x24")](_0x3a95d0[0x0]["deviceIdConfig"]);}});};exports[a20_0x5502("0x3b")]=function(_0x293163,_0x508366){Config[a20_0x5502("0x1f")]()["exec"](function(_0x3ebd30,_0x596117){if(_0x3ebd30){logger[a20_0x5502("0x8")]("Error\x20while\x20reading\x20DeviceId\x20config",{"error":_0x3ebd30});return _0x508366["status"](0x190)["send"]({"message":errorHandler["getErrorMessage"](_0x3ebd30)});}else{_0x596117[0x0][a20_0x5502("0x3c")]=_0x293163[a20_0x5502("0x27")];_0x596117[0x0][a20_0x5502("0x1b")](function(_0x3ebd30){if(_0x3ebd30){logger["error"](a20_0x5502("0x3d"),{"error":_0x3ebd30});return _0x508366[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x3ebd30)});}else{_0x508366["json"](_0x596117[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x3e"));}});}});};exports[a20_0x5502("0x3f")]=function(_0x23f4d8,_0x194f60){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0xd0af5e,_0x3c056f){if(_0xd0af5e){logger[a20_0x5502("0x8")](a20_0x5502("0x3a"),{"error":_0xd0af5e});return _0x194f60[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0xd0af5e)});}else{_0x194f60["json"](_0x3c056f[0x0]["menuConfig"]);}});};exports["updateMenuConfig"]=function(_0x9f6c1b,_0xafdd6c){Config[a20_0x5502("0x1f")]()["exec"](function(_0x58a461,_0x4631b8){if(_0x58a461){logger[a20_0x5502("0x8")](a20_0x5502("0x40"),{"error":_0x58a461});return _0xafdd6c[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler[a20_0x5502("0x23")](_0x58a461)});}else{_0x4631b8[0x0][a20_0x5502("0x19")]=_0x9f6c1b["body"];_0x4631b8[0x0]["save"](function(_0x58a461){if(_0x58a461){logger[a20_0x5502("0x8")](a20_0x5502("0x41"),{"error":_0x58a461});return _0xafdd6c[a20_0x5502("0x21")](0x190)[a20_0x5502("0x22")]({"message":errorHandler["getErrorMessage"](_0x58a461)});}else{_0xafdd6c[a20_0x5502("0x24")](_0x4631b8[0x0]);logger[a20_0x5502("0x1a")](a20_0x5502("0x42"));configVars[a20_0x5502("0x19")]=_0x9f6c1b[a20_0x5502("0x27")];}});}});};exports[a20_0x5502("0x22")]=function(_0x321fde,_0x154c31){var _0x110a7c=nodemailer[a20_0x5502("0x43")]({"host":_0x321fde[a20_0x5502("0x27")][a20_0x5502("0x44")],"port":_0x321fde[a20_0x5502("0x27")]["port"],"requiresAuth":!![],"tls":_0x321fde[a20_0x5502("0x27")][a20_0x5502("0x45")],"secure":_0x321fde[a20_0x5502("0x27")][a20_0x5502("0x46")],"auth":{"user":_0x321fde[a20_0x5502("0x27")][a20_0x5502("0x47")],"pass":_0x321fde[a20_0x5502("0x27")][a20_0x5502("0x13")]}});var _0x5441ee={"to":_0x321fde[a20_0x5502("0x27")]["testEmail"],"from":_0x321fde[a20_0x5502("0x27")]["email"],"subject":a20_0x5502("0x48"),"text":a20_0x5502("0x49")};_0x110a7c[a20_0x5502("0x4a")](_0x5441ee,function(_0x331442){if(!_0x331442){logger["info"]("An\x20test\x20email\x20has\x20been\x20sent\x20to\x20"+_0x321fde[a20_0x5502("0x27")]["testEmail"]+".");_0x154c31[a20_0x5502("0x22")]({"message":a20_0x5502("0x4b")+_0x321fde["body"][a20_0x5502("0x4c")]+"."});}else{logger[a20_0x5502("0x8")](a20_0x5502("0x4d"),{"error":_0x331442});_0x154c31["sendStatus"](0x1f4);return;}});};exports[a20_0x5502("0x4e")]=function(){Config[a20_0x5502("0x1f")]()[a20_0x5502("0x7")](function(_0x42d324,_0x47ea5e){if(_0x42d324){logger[a20_0x5502("0x8")](a20_0x5502("0x40"),{"error":_0x42d324});}else{if(!_0x47ea5e[a20_0x5502("0x4f")]||!_0x47ea5e[0x0]["menuConfig"]){configVars[a20_0x5502("0x19")]={"isDashboard":!![],"isSync":!![],"isDevice":!![],"isData":!![],"isSNMP":!![],"isModbus":!![],"isOPC":!![],"isUDD":!![],"isAnalytics":!![],"isComputing":!![],"isUsers":!![],"isSettings":!![],"isHelp":!![]};}else{configVars[a20_0x5502("0x19")]=_0x47ea5e[0x0][a20_0x5502("0x19")];}}});};