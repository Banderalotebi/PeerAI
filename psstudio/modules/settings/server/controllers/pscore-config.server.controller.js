var a22_0x14e6=["resolve","mongoose","model","nodemailer","../../../core/server/controllers/errors.server.controller","Creating\x20\x20pscore\x20config","body","createdBy","_id","save","status","send","info","Pscore\x20config\x20created","updateDeviceIdConfig","find","exec","error","Error\x20while\x20reading\x20DeviceId\x20config","Error\x20while\x20updating\x20DeviceId\x20config","getErrorMessage","json","updateConfig","psScoreConfig","machineAddress","logFilePath","update","Could\x20not\x20update\x20pscore\x20config\x20info","Updated\x20pscore\x20config\x20info","delete","remove","Could\x20not\x20delete\x20pscore\x20config","pscore\x20config\x20deleted","Error\x20while\x20reading\x20Menu\x20config","psCoreConfigById","findById","Error\x20while\x20finding\x20psconfig\x20data","path"];(function(_0x509c82,_0x2cf6ec){var _0x1a0223=function(_0x230d48){while(--_0x230d48){_0x509c82["push"](_0x509c82["shift"]());}};_0x1a0223(++_0x2cf6ec);}(a22_0x14e6,0x1ed));var a22_0x42df=function(_0xb67384,_0x27295a){_0xb67384=_0xb67384-0x0;var _0x156d7c=a22_0x14e6[_0xb67384];return _0x156d7c;};/**
 * Created by vishnu on 21/03/18.
 */
"use strict";/**
 * Module dependencies.
 */var path=require(a22_0x42df("0x0")),logger=require(path[a22_0x42df("0x1")]("./logger")),mongoose=require(a22_0x42df("0x2")),Config=mongoose[a22_0x42df("0x3")]("PsCoreConfig"),nodemailer=require(a22_0x42df("0x4")),errorHandler=require(a22_0x42df("0x5"));var configVars=require(path[a22_0x42df("0x1")]("./config/config"));exports["createPscoreId"]=function(_0x2b6796,_0x14cd64){logger["info"](a22_0x42df("0x6"));var _0x542d79=_0x2b6796[a22_0x42df("0x7")];_0x542d79[a22_0x42df("0x8")]=_0x2b6796["user"][a22_0x42df("0x9")];var _0x125a97=new Config(_0x542d79);_0x125a97[a22_0x42df("0xa")](function(_0x376bb5,_0x765593){if(_0x376bb5){logger["error"]("Unable\x20to\x20save\x20pscore\x20config",{"error":_0x376bb5});_0x14cd64[a22_0x42df("0xb")](0x190)[a22_0x42df("0xc")]({"statusText":"duplicate\x20machine\x20name"});}else{logger[a22_0x42df("0xd")](a22_0x42df("0xe"));_0x14cd64["send"](_0x765593);}});};exports[a22_0x42df("0xf")]=function(_0x4ac61e,_0x213d97){Config[a22_0x42df("0x10")]()[a22_0x42df("0x11")](function(_0x498e89,_0x11a854){if(_0x498e89){logger[a22_0x42df("0x12")](a22_0x42df("0x13"),{"error":_0x498e89});return _0x213d97[a22_0x42df("0xb")](0x190)[a22_0x42df("0xc")]({"message":errorHandler["getErrorMessage"](_0x498e89)});}else{_0x11a854[0x0]["deviceIdConfig"]=_0x4ac61e[a22_0x42df("0x7")];_0x11a854[0x0][a22_0x42df("0xa")](function(_0x498e89){if(_0x498e89){logger[a22_0x42df("0x12")](a22_0x42df("0x14"),{"error":_0x498e89});return _0x213d97[a22_0x42df("0xb")](0x190)[a22_0x42df("0xc")]({"message":errorHandler[a22_0x42df("0x15")](_0x498e89)});}else{_0x213d97[a22_0x42df("0x16")](_0x11a854[0x0]);logger[a22_0x42df("0xd")]("Updated\x20DeviceId\x20Config");}});}});};exports[a22_0x42df("0x17")]=function(_0x1fa377,_0x37d7f5){var _0x1f39c1=_0x1fa377["body"][0x0];var _0x31a971=_0x1fa377[a22_0x42df("0x18")];_0x31a971[a22_0x42df("0x19")]=_0x1f39c1[a22_0x42df("0x19")];_0x31a971[a22_0x42df("0x1a")]=_0x1f39c1["logFilePath"];_0x31a971["isActivated"]=!![];Config[a22_0x42df("0x1b")]({"_id":_0x1fa377[a22_0x42df("0x18")][a22_0x42df("0x9")]},{"$set":_0x31a971},function(_0x32a8e4,_0x5a8bcb){if(_0x32a8e4){logger[a22_0x42df("0x12")](a22_0x42df("0x1c"),{"error":_0x32a8e4});_0x37d7f5["status"](0x190)[a22_0x42df("0xc")]({"message":a22_0x42df("0x1c")});}_0x37d7f5[a22_0x42df("0xc")]({"message":a22_0x42df("0x1d")});});};exports[a22_0x42df("0x1e")]=function(_0xb1cb24,_0x97e32){var _0x5aaacf=_0xb1cb24[a22_0x42df("0x18")];_0x5aaacf[a22_0x42df("0x1f")](function(_0x234b14){if(_0x234b14){logger["error"]("Could\x20not\x20delete\x20pscore\x20config",{"error":_0x234b14});if(_0x97e32){_0x97e32["status"](0x190)[a22_0x42df("0xc")]({"message":a22_0x42df("0x20")});}}else{_0x97e32[a22_0x42df("0xb")](0xc8)[a22_0x42df("0xc")]();logger[a22_0x42df("0xd")](a22_0x42df("0x21"));}});};exports["loadConfigs"]=function(_0x3122d2,_0x2eb422){Config[a22_0x42df("0x10")]()["exec"](function(_0x4f77c6,_0x250fd6){if(_0x4f77c6){logger[a22_0x42df("0x12")](a22_0x42df("0x22"),{"error":_0x4f77c6});}else{_0x2eb422[a22_0x42df("0xc")](_0x250fd6);}});};exports[a22_0x42df("0x23")]=function(_0x30b803,_0x4aa87a,_0xf7a840,_0x2e9306){Config[a22_0x42df("0x24")](_0x2e9306)[a22_0x42df("0x11")](function(_0xc9ac37,_0x3adce1){if(_0xc9ac37){logger[a22_0x42df("0x12")](a22_0x42df("0x25"),{"error":_0xc9ac37});return _0xf7a840(_0xc9ac37);}else if(!_0x3adce1){return _0x4aa87a[a22_0x42df("0xb")](0x194)[a22_0x42df("0xc")]({"message":"No\x20psconfig\x20with\x20that\x20identifier\x20has\x20been\x20found"});}_0x30b803["psScoreConfig"]=_0x3adce1;_0xf7a840();});};